\begin{figure}[t]

\begin{minipage}[t]{\linewidth}

{\centering 

\begin{CodeInput}
\begin{Highlighting}[]
\KeywordTok{from} \ClassTok{poincare} \KeywordTok{import} \ClassTok{Derivative}, \ClassTok{System}, \ClassTok{Variable}, \FunctionTok{initial}
\end{Highlighting}
\end{CodeInput}

}

\end{minipage}%
\newline
\begin{minipage}[t]{\linewidth}

{\centering

\begin{minipage}[c]{0.6\linewidth}

{\centering 

\begin{CodeInput}
\begin{Highlighting}[]
\KeywordTok{class} \ClassTok{Decay}\KeywordTok{(}\ClassTok{System}\KeywordTok{)}\OperatorTok{:}
    \VariableTok{x}\OperatorTok{:} \ClassTok{Variable} \OperatorTok{=} \FunctionTok{initial}\KeywordTok{(\VariableTok{default}\OperatorTok{=}\ValueTok{1})}
    \VariableTok{eq} \OperatorTok{=} \VariableTok{x}.\FunctionTok{derive}\KeywordTok{()} \OperatorTok{\textless{}\textless{}} \OperatorTok{-}\VariableTok{x}
\end{Highlighting}
\end{CodeInput}

}

\end{minipage}%
%
\begin{minipage}[c]{0.2\linewidth}

{\centering 

\[
\frac{dx}{dt} = -x
\]

}

\end{minipage}%
%
\begin{minipage}[c]{0.2\linewidth}

{\centering 

\[
x(0) = 1
\]

}

\end{minipage}%

\subcaption{\label{fig-first-order}First-order system of an exponential decay. The variable
\texttt{x} stores the initial condition for \(x\), and the variable
\texttt{eq} stores the rate equation for \(x\).}

}

\end{minipage}%
\newline
\begin{minipage}[t]{\linewidth}

{\centering 

\begin{minipage}[c]{0.6\linewidth}

{\centering 

\begin{CodeInput}
\begin{Highlighting}[]
\KeywordTok{class} \ClassTok{Oscillator}\KeywordTok{(}\ClassTok{System}\KeywordTok{)}\OperatorTok{:}
    \VariableTok{x}: \ClassTok{Variable} \OperatorTok{=} \FunctionTok{initial}\KeywordTok{(\VariableTok{default}\OperatorTok{=}\ValueTok{1})}
    \VariableTok{v}: \ClassTok{Derivative} \OperatorTok{=} \VariableTok{x}.\FunctionTok{derive}\KeywordTok{(\VariableTok{initial}\OperatorTok{=}\ValueTok{0})}
    \VariableTok{eq} \OperatorTok{=} \VariableTok{v}.\FunctionTok{derive}\KeywordTok{()} \OperatorTok{\textless{}\textless{}} \OperatorTok{-}\VariableTok{x}
\end{Highlighting}
\end{CodeInput}

}

\end{minipage}%
%
\begin{minipage}[c]{0.2\linewidth}

{\centering 

\[
\frac{d^2x}{dt^2} = -x
\]

}

\end{minipage}%
%
\begin{minipage}[c]{0.2\linewidth}

{\centering 

\[
\begin{cases}
    x(0) &= 1 \\
    \frac{dx}{dt}(0) &= 0
\end{cases}
\]

}

\end{minipage}%

\subcaption{\label{fig-second-order}Second-order system of an harmonic oscillator, where the
variable \texttt{v} stores the derivative \(\frac{dx}{dt}\) and the rate
equation is specified for the derivative \texttt{v}.}

}

\end{minipage}%
\newline
\begin{minipage}[t]{\linewidth}

{\centering 

\begin{minipage}[c]{0.6\linewidth}

{\centering 

\begin{CodeInput}
\begin{Highlighting}[]
\KeywordTok{class} \ClassTok{BigModel}\KeywordTok{(}\ClassTok{System}\KeywordTok{)}:
    \VariableTok{x}: \ClassTok{Variable} \OperatorTok{=} \FunctionTok{initial}\KeywordTok{(\VariableTok{default}\OperatorTok{=}\ValueTok{1})}
    \VariableTok{linked} \OperatorTok{=} \ClassTok{Decay}\KeywordTok{(\VariableTok{x}\OperatorTok{=}\VariableTok{x})}
    \VariableTok{independent} \OperatorTok{=} \ClassTok{Decay}\KeywordTok{(\VariableTok{x}\OperatorTok{=}\ValueTok{2})}
\end{Highlighting}
\end{CodeInput}

}

\end{minipage}%
%
\begin{minipage}[c]{0.2\linewidth}

{\centering 

\[
\begin{cases}
    \frac{dx}{dt} = -x \\
    \frac{dy}{dt} = -y
\end{cases}
\]

}

\end{minipage}%
%
\begin{minipage}[c]{0.2\linewidth}

{\centering 

\[
\begin{cases}
    x(0) &= 1 \\
    y(0) &= 2
\end{cases}
\]

}

\end{minipage}%

\subcaption{\label{fig-composition}First-order system of two exponential decays by composition of
the \texttt{Decay} system. The subsystem \texttt{linked} has a reference
to the outer variable \texttt{x}, while the subsystem
\texttt{independent} defines a new variable with initial condition $2$,
which on the corresponding mathematical expression was named \(y\).}

}

\end{minipage}%

\caption{\label{fig-poincare}Code and corresponding mathematical
expressions for different systems.}

\end{figure}
